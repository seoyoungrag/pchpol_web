<%@ page language="java" contentType="text/html; charset=utf-8"
	pageEncoding="utf-8"%>

<jsp:include page="common/header.jsp" flush="true" />
<script>
jQuery(function ($) {
   	jQuery(grid).jqGrid({
   		url : url,
   		datatype: "json",
   		jsonReader : {
   		          		root: "data.rows", //게시글 리스트
   		          		page: "data.page", //현재 페이지
   						total: "data.total", //페이지에 표시되는 수
   						records: "data.records" //전체 레코드
   					},
   	   	colNames:['No.','권한','소속','계급','성명','비고','아이디','패스워드'],
   	   	colModel:[
   	   		{name:'adminNo',index:'adminNo', width:"30", align: "center"},
   	   		{name:'code.code1depth', index:'code', width:"70",align:"center"},
   	   		{name:'adminDept',index:'adminDept', width:"120", align: "center"},
   	   		{name:'adminRank', index:'adminRank', width:"70",align:"center"},
   	   		{name:'adminName',index:'adminName', width:"30", align:"center"},
   	   		{name:'adminEtc',index:'adminEtc', width:"300", align:"center"},
   	   		{name:'adminId', hidden:true, index:'adminId'},		
   	   		{name:'adminPassword',hidden:true,index:'adminPassword'}
   	   	],
   	   	rowNum:10,
   	   	rowList:[10,20,30],
   	   	pager: pager,
   	   	sortname: 'adminNo',
   	    viewrecords: true,
   	    sortorder: "desc",
   	    autowidth:true,
   	    shrinkToFit: true,
   	    loadComplete : function()
   		{	
   	    }
   	});
   	jQuery(grid).jqGrid('navGrid','#list-pager',{edit:false,add:false,del:false});
});        
var grid = "#list-grid";
var pager = "#list-pager";
var url = '${pageContext.request.contextPath}/admin/list?listType=jqgrid';
function gridReload(){
	jQuery(grid).jqGrid('setGridParam',{url:encodeURI(url+"&searchType="+jQuery("#searchType").val()+"&searchWord="+jQuery("#searchWord").val()),page:1}).trigger("reloadGrid");
}
</script>

<div class="row">
	<div class="col-sm-12">
		<div class="page-title-box">
			<div class="btn-group pull-right">
				<button class="btn btn-default waves-effect waves-light"
					type="button" onclick="javascript:bodyLoad('${pageContext.request.contextPath}/admin/reg.do');">등록</button>
			</div>
			<h4 class="page-title">관리자 리스트</h4>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-12">
		<div class="card-box table-responsive">
			<div id="datatable_wrapper" class="dataTables_wrapper container-fluid dt-bootstrap4 no-footer">
				<div class="row">
					<div class="col-sm-12 col-md-12">
						<div class="card-box">
							<div id="datatable_filter" class="dataTables_filter">
								<div class="col-sm-9"></div>
								<div class="col-sm-1">
									<label>
									<select id="searchType" class="form-control form-control-middle">
											<option value="adminName">성명</option>
											<option value="adminDept">소속</option>
									</select>
									</label>
								</div>
								<div class="col-sm-2">
								<label>
									<input type="text" id="searchWord" class="form-control form-control-middle" placeholder="" value="">
										<button class="btn btn-primary waves-effect waves-light"
											type="button" onclick="gridReload();">검색</button>
								</label>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-12">
						<div class="card-box">
							<table id="list-grid"></table>
							<div id="list-pager"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>